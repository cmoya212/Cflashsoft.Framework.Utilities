var cflashsoftUtil={rootPath:null,apiPath:null,queryString:{},isAndroid:!1,_isBusy:!1,waitSpinner:null,currentPopup:null,overlays:null,alertBox:null,alertBoxOkCallback:null,alertBoxCancelCallback:null,clientFunctions:{},init:function(){this.queryString=this.parseQueryString(window.location.search.substring(1));this.isAndroid=/android/i.test(navigator.userAgent.toLowerCase());var n=$("body");this.waitSpinner=$('<div style="position:absolute;z-index:10001;width:100px;height:100px;display:none"><img src="'+this.rootPath+'images/spinner.gif" width="100" height="100" /><\/div>').appendTo(n);this.overlays=[$('<div class="overlay1" style="position:fixed;z-index:10000;width:5px;height:5px;display:none"><\/div>').appendTo(n),$('<div class="overlay2" style="position:fixed;z-index:10000;width:5px;height:5px;display:none"><\/div>').appendTo(n)];this.alertBox=$('<div id="chatsoftAlertBox" class="modal fade" data-keyboard="false" data-backdrop="static" data-focus="true" style="display:none;"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><span id="chatsoftAlertBoxOkIcon" class="text-success glyphicon glyphicon-ok" style="display:none;"><\/span><span id="chatsoftAlertBoxHandIcon" class="text-primary glyphicon glyphicon-hand-right" style="display:none;"><\/span><span id="chatsoftAlertBoxInfoIcon" class="text-info glyphicon glyphicon-info-sign" style="display:none;"><\/span><span id="chatsoftAlertBoxQuestIcon" class="text-primary glyphicon glyphicon-question-sign" style="display:none;"><\/span><span id="chatsoftAlertBoxExclIcon" class="text-warning glyphicon glyphicon-exclamation-sign" style="display:none;"><\/span><span id="chatsoftAlertBoxErrIcon" class="text-danger glyphicon glyphicon-remove-sign" style="display:none;"><\/span>&nbsp;<span id="chatsoftAlertBoxMessage"><\/span><\/div><div class="modal-footer"><button id="chatsoftAlertOk" type="button" class="btn btn-success" onclick="cflashsoftUtil.alertOk();"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span> Ok<\/button><button id="chatsoftAlertCancel" type="button" class="btn btn-default" onclick="cflashsoftUtil.alertCancel();">Cancel<\/button><\/div><\/div><\/div><\/div>').appendTo(n);this.alertBox.on("shown.bs.modal",function(){cflashsoftUtil.alertBox.find("button:first").focus()})},getApiData:function(n,t){return this.apiAjax("GET",n,t,"json",null)},postApiData:function(n,t){return this.apiAjax("POST",n,JSON.stringify(t),"json",null)},putApiData:function(n,t){return this.apiAjax("PUT",n,JSON.stringify(t),"json",null)},deleteApiData:function(n,t){return this.apiAjax("DELETE",n,JSON.stringify(t),"json",null)},getApiDataAsync:function(n,t,i,r){return this.apiAjaxAsync("GET",n,t,i,r,"json")},postApiDataAsync:function(n,t,i,r){return this.apiAjaxAsync("POST",n,JSON.stringify(t),i,r,"json")},postApiFormDataAsync:function(n,t,i,r){return this.apiFormAjaxAsync("POST",n,t,i,r,"json")},postApiTextDataAsync:function(n,t,i,r){return this.apiAjaxAsync("POST",n,JSON.stringify(t),i,r,"text")},putApiDataAsync:function(n,t,i,r){return this.apiAjaxAsync("PUT",n,JSON.stringify(t),i,r,"json")},deleteApiDataAsync:function(n,t,i,r){return this.apiAjaxAsync("DELETE",n,JSON.stringify(t),i,r,"json")},apiAjax:function(n,t,i,r,u){this.resetAutoLogout(!0);var f=null,e="";return r=="json"&&(e="application/json"),$.ajax({type:n,url:this.apiPath+t,data:i,dataType:r,async:!1,cache:!1,timeout:12e4,success:function(n){f=n},failure:function(){if(typeof u!="undefined")f=u;else throw-1;},error:function(){if(typeof u!="undefined")f=u;else throw-1;},processData:!1,contentType:e,xhrFields:{withCredentials:!0}}),f},apiAjaxAsync:function(n,t,i,r,u,f){this.resetAutoLogout(!0);var e="";return f=="json"&&(e="application/json"),$.ajax({type:n,url:this.apiPath+t,data:i,dataType:f,async:!0,cache:!1,timeout:12e4,success:r,failure:u,error:u,processData:!1,contentType:!1,xhrFields:{withCredentials:!0}})},apiFormAjaxAsync:function(n,t,i,r,u){this.resetAutoLogout(!0);return $.ajax({url:this.apiPath+t,dataType:"json",type:n,async:!0,data:i,processData:!1,contentType:!1,timeout:12e4,success:r,failure:u,error:u,xhrFields:{withCredentials:!0}})},isBusy:function(n){var t=!1;return typeof n=="undefined"?t=this._isBusy:(this._isBusy=n,n?this.showWaitSpinner():this.hideWaitSpinner(),t=n),t},showWaitSpinner:function(){var t=$(window),n=this.waitSpinner;this.showOverlay(0);n.show();n.css("top",Math.max(0,(t.height()-n.outerHeight())/2+t.scrollTop())+"px");n.css("left",Math.max(0,(t.width()-n.outerWidth())/2+t.scrollLeft())+"px")},hideWaitSpinner:function(){this.waitSpinner.hide();this.hideOverlay()},tipTimer:null,showTip:function(n,t,i,r){if(i!=null&&n.html(i),n.show(),n.position({my:"left top",at:"left top+100%",of:t,collision:"flipfit"}),n.hide(),n.fadeIn(),r){if(this.tipTimer!=null)try{window.clearTimeout(this.tipTimer)}catch(u){}this.tipTimer=window.setTimeout(function(){cflashsoftUtil.tipTimer=null;n.fadeOut()},5e3)}},hideTip:function(n){n.fadeOut()},showOverlay:function(n){var t=this.overlays[n];t.show();t.css("top","0");t.css("left","0");t.css("width","100%");t.css("height","100%")},hideOverlay:function(){for(var n=0;n<this.overlays.length;n++)this.overlays[n].hide()},showPopup:function(n,t,i){if(this.currentPopup==null){typeof i=="undefined"&&(i=0);this.showOverlay(i);t&&n.attr("class",t);n.show();this.centerPopup(n);this.currentPopup=n;$(window).on("resize",this.onWindowResizeForPopup)}},hidePopup:function(){var n=this.currentPopup;$(window).off("resize",this.onWindowResizeForPopup);this.currentPopup=null;n.hide();this.hideOverlay()},centerPopup:function(n){n.css("position","absolute");n.css("top",Math.max(0,($(window).height()-n.outerHeight())/2+$(window).scrollTop())+"px");n.css("left",Math.max(0,($(window).width()-n.outerWidth())/2+$(window).scrollLeft())+"px")},showErrorAlert:function(n,t){var i=$("#"+n);i.find("span:first").empty().html(t);i.show()},hideErrorAlert:function(n){var t=$("#"+n);t.hide()},findKeyValueItemValue:function(n,t){var r=null,i;if(n!=null)for(i=0;i<n.length;i++)if(n[i].Key==t){r=n[i].Value;break}return r},findKeyValueItem:function(n,t){var r=null,i;if(n!=null)for(i=0;i<n.length;i++)if(n[i].Key==t){r=n[i];break}return r},findInArray:function(n,t,i){for(var u=null,r=0;r<n.length;r++)if(t==null){if(n[r]==i){u=n[r];break}}else if(n[r][t]==i){u=n[r];break}return u},isNumericCharCode:function(n,t,i,r,u){var f=n>=48&&n<=57||t&&n==46;return i==null||f||this.showTip(i,r,u,!0),f},getElementValue:function(n){var i="",t=$(n);switch(t.prop("tagName").toLowerCase()){case"input":switch(t.attr("type").toLowerCase()){case"text":i=t.val();break;case"checkbox":case"radio":i=t.is(":checked")?"true":"false"}break;case"textarea":i=t.val();break;case"select":i=t.val().toString()}return i},setElementValue:function(n,t,i){var r=$(n);switch(r.prop("tagName").toLowerCase()){case"input":switch(r.attr("type").toLowerCase()){case"text":i?r.replaceWith(this.getSafeValue(t)):r.val(t);break;case"checkbox":case"radio":i?t.toLowerCase()=="true"?r.replaceWith("[X]"):r.replaceWith("[&nbsp;]"):r.prop("checked",t.toLowerCase()=="true")}break;case"textarea":i?r.replaceWith(this.getSafeValue(t)):r.val(t);break;case"select":r.val(t.split(","));break;case"div":case"span":r.html(t)}},getSafeValue:function(n){return n==null||n==""?"&nbsp;":n},checkboxAsRadioClick:function(n){var t=$(n);$("[name='"+t.attr("name")+"']").each(function(){var n=$(this);n.is(t)||n.prop("checked",!1)})},formatErrors:function(n){var t="",r,i,u;if(n!=null&&n.length>0)if(n.length>1){for(t+="<ul>",r=0;r<n.length;r++)if(i=n[r],i.constructor===Array)for(u=0;u<i.length;u++)t+="<li>",t+=i[u],t+="<\/li>";else t+="<li>",t+=i,t+="<\/li>";t+="<\/ul>"}else t+="<span>"+n[0]+"<\/span>";return t},formatRangeString:function(n,t,i,r){return n==0&&t==0?"":n==t?n.toString()+i:n==0?t.toString()+i:t==0?n.toString()+i:n.toString()+" - "+t.toString()+r},formatShortDateString:function(n){return n!=null&&n!=""?n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear():"N/A"},formatLongDateString:function(n){if(n!=null&&n!=""){var t=this.formatShortDateString(n);return t+(" "+this.formatTimeString(n))}return"N/A"},formatTimeString:function(n){if(n!=null&&n!=""){var t=n.getHours(),i="";return i=t>11?"PM":"AM",t>12?t-=12:t===0&&(t=12),""+(""+t+":"+this.formatNumber(n.getMinutes(),"00")+":"+this.formatNumber(n.getSeconds(),"00")+" "+i)}return""},formatShortDateInput:function(n){return n!=null&&n!=""?n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate().toString():n.getDate()):""},formatNumber:function(n,t){for(var i=n.toString(),r=t.substr(0,1);i.length<t.length;)i=r+i;return i},cleanNumber:function(n){return typeof n=="string"?Number(n.replace(/\%|\$|\,/g,"")):n},convertUTCDateToLocalDate:function(n){var t=new Date(n.getTime()+n.getTimezoneOffset()*6e4),i=n.getTimezoneOffset()/60,r=n.getHours();return t.setHours(r-i),t},formatBreadcrumbs:function(n){for(var i,r=[],t=0;t<n.length;t+=2)n[t]!=null&&(i=$("<li><\/li>"),n[t+1]!=null?$("<a><\/a>").attr("href",n[t+1]).text(n[t]).appendTo(i):i.text(n[t]),t==n.length-2&&i.addClass("active"),r.push(i));return r},createCookie:function(n,t,i){var u="",r;typeof i!="undefined"&&(r=new Date,r.setTime(r.getTime()+i*1e3),u="; expires="+r.toGMTString());document.cookie=n+"="+t+u+"; path=/"},getCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},deleteCookie:function(n){this.createCookie(n,"",-1)},setTimezoneCookie:function(n){var t=this.getCookie("timeZoneOffset"),i=(new Date).getTimezoneOffset();(t==null||t!=i)&&(this.createCookie("timeZoneOffset",i),typeof n!="undefined"&&n&&(document.location=document.location))},parseQueryString:function(n){for(var i={},t,u=/\+/g,f=/([^&=]+)=?([^&]*)/g,r=function(n){return decodeURIComponent(n.replace(u," "))};t=f.exec(n);)i[r(t[1]).toLowerCase()]=r(t[2]);return i},parseModelStateErrors:function(n,t){var r=[],f,i,u,e;try{if(n!=null&&n.status==400&&(f=JSON.parse(n.responseText),f!=null&&(i=f.ModelState,i!=null)))if(i.constructor===Array)for(u=0;u<i.length;u++)r.push(i[u]);else for(e in i)i.hasOwnProperty(e)&&r.push(i[e])}catch(o){}return t==!0&&r.length==0&&n!=null&&n.responseText!=null&&$.trim(n.responseText)!=""&&r.push(n.responseText),t==!0&&r.length==0&&r.push("An unexpected error occurred"),r},round:function(n,t){return typeof t=="undefined"||+t==0?Math.round(n):(n=+n,t=+t,isNaN(n)||!(typeof t=="number"&&t%1==0))?NaN:(n=n.toString().split("e"),n=Math.round(+(n[0]+"e"+(n[1]?+n[1]+t:t))),n=n.toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]-t:-t)))},getDataAttributes:function(n,t,i){var e={},o=n.data(),f,u,r,s;for(f in o)o.hasOwnProperty(f)&&(u=null,r=null,t===null||t===""||typeof t=="undefined"?u=f:f.substring(0,t.length)===t&&(u=f.substring(t.length)),u!=null&&(r=o[f],r!=null&&typeof r=="string"&&(r==="#chatsofttruefunc"?r=cflashsoftUtil.trueFunc:r==="#chatsoftfalsefunc"?r=cflashsoftUtil.falseFunc:r.substring(0,6)=="#JSON{"?r=JSON.parse(r.substring(5)):r.substring(0,6)=="#FUNC{"&&(s=r.substring(6,r.length-1),r=this.clientFunctions[s])),i?e[u.substring(0,1).toLowerCase()+u.substring(1)]=r:e[u]=r));return e},trueFunc:function(){return!0},falseFunc:function(){return!1},alert:function(n,t,i){this.alertBoxOkCallback=null;this.alertBoxCancelCallback=null;typeof t!="undefined"&&(this.alertBoxOkCallback=t,this.alertBoxCancelCallback=t);this.updateAlertIcon(i);$("#chatsoftAlertBoxMessage").html(n);$("#chatsoftAlertCancel").hide();$("#chatsoftAlertBox").modal("show")},confirm:function(n,t,i,r){this.alertBoxOkCallback=null;this.alertBoxCancelCallback=null;typeof t!="undefined"&&(this.alertBoxOkCallback=t);typeof i!="undefined"&&(this.alertBoxCancelCallback=i);this.updateAlertIcon(r);$("#chatsoftAlertBoxMessage").html(n);$("#chatsoftAlertCancel").show();$("#chatsoftAlertBox").modal("show")},updateAlertIcon:function(n){if($("#chatsoftAlertBoxOkIcon").hide(),$("#chatsoftAlertBoxHandIcon").hide(),$("#chatsoftAlertBoxInfoIcon").hide(),$("#chatsoftAlertBoxQuestIcon").hide(),$("#chatsoftAlertBoxExclIcon").hide(),$("#chatsoftAlertBoxErrIcon").hide(),n!=null)switch(n.toLowerCase()){case"ok":case"success":$("#chatsoftAlertBoxOkIcon").show();break;case"hand":$("#chatsoftAlertBoxHandIcon").show();break;case"info":case"information":$("#chatsoftAlertBoxInfoIcon").show();break;case"question":$("#chatsoftAlertBoxQuestIcon").show();break;case"exclamation":case"warning":$("#chatsoftAlertBoxExclIcon").show();break;case"error":case"danger":$("#chatsoftAlertBoxErrIcon").show()}},hideAlert:function(){$("#chatsoftAlertBox").modal("hide")},alertOk:function(){this.alertBoxOkCallback!=null?this.alertBoxOkCallback()&&this.hideAlert():this.hideAlert()},alertCancel:function(){this.alertBoxCancelCallback!=null?this.alertBoxCancelCallback()&&this.hideAlert():this.hideAlert()},autoLogoutEnabled:!1,autoLogoutTimer:null,autoLogoutStartTime:null,autoLogoutMinutes:5,autoLogoutWarnMinutes:2,autoLogoutRedirUrl:"logout",autoLogoutPingUrl:"ping",initAutoLogout:function(){this.autoLogoutEnabled=!0;$('<div id="chatsoftAutoLogoutBox" class="modal fade" style="display:none;"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><img src="'+cflashsoftUtil.rootPath+'images/timeout2.gif" /> <span id="chatsoftAutoLogoutMessage"><\/span><\/div><div class="modal-footer"><button type="button" class="btn btn-success" onclick="cflashsoftUtil.resetAutoLogout(true);"><span class="glyphicon glyphicon-ok" aria-hidden="true"><\/span> Continue<\/button><\/div><\/div><\/div><\/div>').appendTo($("body"));this.resetAutoLogout(!1)},resetAutoLogout:function(n){this.autoLogoutEnabled&&(this.autoLogoutTimer!=null&&(window.clearTimeout(this.autoLogoutTimer),this.autoLogoutTimer=null,this.autoLogoutStartTime=null),n&&$.ajax({url:this.rootPath+this.autoLogoutPingUrl,cache:!1,type:"GET"}),this.autoLogoutStartTime=new Date,this.autoLogoutTimer=window.setInterval(this.onAutoLogoutInterval,2e4),$("#chatsoftAutoLogoutBox").is(":visible")&&$("#chatsoftAutoLogoutBox").modal("hide"))},onAutoLogoutInterval:function(){var n=(new Date-cflashsoftUtil.autoLogoutStartTime)/6e4|0,t;cflashsoftUtil.autoLogoutWarnMinutes>0&&n>=cflashsoftUtil.autoLogoutMinutes-cflashsoftUtil.autoLogoutWarnMinutes&&(t=cflashsoftUtil.autoLogoutMinutes-n,$("#chatsoftAutoLogoutMessage").html("You will be logged out in "+t+" "+(t==1?"minute":"minutes")+" unless you click 'Continue'"),$("#chatsoftAutoLogoutBox").is(":visible")||$("#chatsoftAutoLogoutBox").modal("show"));n>=cflashsoftUtil.autoLogoutMinutes&&(window.location=cflashsoftUtil.rootPath+cflashsoftUtil.autoLogoutRedirUrl)},onWindowResizeForPopup:function(){cflashsoftUtil.centerPopup(cflashsoftUtil.currentPopup)}};